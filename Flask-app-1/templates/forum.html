{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="col-md-10 forum-padding-top">
        <div class="border rounded row forum-padding">
            <h1 class="display-6">New Post</h1>
            <form id="forum" method="POST" enctype="multipart/form-data">
                <div class="form-group row forum-padding">
                    <label for="subject" class="col-sm-2 col-form-label">Subject</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="subject" placeholder="Enter Subject" required>
                    </div>
                </div>
                <div class="form-group row forum-padding">
                    <label for="message-text" class="col-sm-2 col-form-label">Message Text</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" name="message-text" placeholder="Enter Message"
                            rows="3"></textarea>
                    </div>
                </div>
                <div class="form-group row forum-padding">
                    <label for="image-upload" class="col-sm-2 col-form-label">Choose an Image</label>
                    <div class="col-sm-10">
                        <input type="file" class="form-control" id="image-upload" name="post-image">
                    </div>
                </div>
                <div class="d-flex justify-content-end forum-padding">
                    <button class="btn btn-primary" type="submit">Submit</button>
                </div>
            </form>
        </div>
        <div class="row display-forums">
            <div class="border">
                <div>
                    <h1 class="display-6" style="padding: 10px;">Recent Posts</h1>
                </div>
                {% for forum in forums %}
                <div class="border-top rounded row">
                    <div class="col-2 d-flex justify-content-center forum-image-padding">
                        <img class="rounded-circle forum-image-size"
                            src="https://storage.googleapis.com/forum-application-a1/user_images/{{ forum['user_name'][(forum['user_name']|count-1)] }}.jpg">
                    </div>
                    <div class="col-10">
                        <div class="border-bottom forum-top">
                            <span id="user-name ">{{ forum['user_name'] }}</span>
                            <span id="date-time">{{forum['date-time']}}</span>
                        </div>
                        <h3>{{forum['subject']}}</h3>
                        <p>{{forum['message-text']}}
                        <div>
                            <img class="forum-image-size"
                                src="https://storage.cloud.google.com/forum-application-a1/post_images/p{{ forum['user_name'][(forum['user_name']|count-1)] }}{{forum['date-time']}}.jpg"
                                onerror='this.style.display = "none"'>
                        </div>
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="user-area">
            <div class="card text-center" style="width: 14rem;">
                <img class="card-img-top user-image" src="{{user_image}}" alt="User Profile Picture">
                <div class="card-body">
                    <a href="{{ url_for('user') }}" class="hyperlink">
                        <h5 class="card-title">{{user}}</h5>
                    </a>
                    <a href="{{ url_for('login') }}" class="hyperlink" style="color: red; font-weight: bold;">
                        <p>Logout</p>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}